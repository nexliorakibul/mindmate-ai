import{p as $,j as t,r as i,l as B,P as M,B as S,T as E,I as F}from"./index-6aHAXhIk.js";import{P as G}from"./Person-DRox9ZoW.js";import{C as Y}from"./Container-BD_EyOa5.js";import{M as q,i as X,u as K,P as _,a as J,b as N,L as O,m as w}from"./proxy-e3X3YiJP.js";import{A as D}from"./Avatar-pfjzFtU9.js";import{T as Q}from"./TextField-kyXPCg2a.js";import"./Select-Dt2UFBzN.js";import"./useSlotProps-C7apNGNe.js";import"./useControlled-W9q4l4gi.js";const Z=$(t.jsx("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"})),z=$(t.jsx("path",{d:"M20 9V7c0-1.1-.9-2-2-2h-3c0-1.66-1.34-3-3-3S9 3.34 9 5H6c-1.1 0-2 .9-2 2v2c-1.66 0-3 1.34-3 3s1.34 3 3 3v4c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-4c1.66 0 3-1.34 3-3s-1.34-3-3-3M7.5 11.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5S9.83 13 9 13s-1.5-.67-1.5-1.5M16 17H8v-2h8zm-1-4c-.83 0-1.5-.67-1.5-1.5S14.17 10 15 10s1.5.67 1.5 1.5S15.83 13 15 13"}));function H(e,a){if(typeof e=="function")return e(a);e!=null&&(e.current=a)}function ee(...e){return a=>{let s=!1;const r=e.map(l=>{const o=H(l,a);return!s&&typeof o=="function"&&(s=!0),o});if(s)return()=>{for(let l=0;l<r.length;l++){const o=r[l];typeof o=="function"?o():H(e[l],null)}}}}function te(...e){return i.useCallback(ee(...e),e)}class ne extends i.Component{getSnapshotBeforeUpdate(a){const s=this.props.childRef.current;if(s&&a.isPresent&&!this.props.isPresent){const r=s.offsetParent,l=X(r)&&r.offsetWidth||0,o=this.props.sizeRef.current;o.height=s.offsetHeight||0,o.width=s.offsetWidth||0,o.top=s.offsetTop,o.left=s.offsetLeft,o.right=l-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function se({children:e,isPresent:a,anchorX:s,root:r}){const l=i.useId(),o=i.useRef(null),u=i.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:f}=i.useContext(q),y=te(o,e?.ref);return i.useInsertionEffect(()=>{const{width:n,height:b,top:d,left:p,right:m}=u.current;if(a||!o.current||!n||!b)return;const g=s==="left"?`left: ${p}`:`right: ${m}`;o.current.dataset.motionPopId=l;const h=document.createElement("style");f&&(h.nonce=f);const v=r??document.head;return v.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${l}"] {
            position: absolute !important;
            width: ${n}px !important;
            height: ${b}px !important;
            ${g}px !important;
            top: ${d}px !important;
          }
        `),()=>{v.contains(h)&&v.removeChild(h)}},[a]),t.jsx(ne,{isPresent:a,childRef:o,sizeRef:u,children:i.cloneElement(e,{ref:y})})}const oe=({children:e,initial:a,isPresent:s,onExitComplete:r,custom:l,presenceAffectsLayout:o,mode:u,anchorX:f,root:y})=>{const n=K(ie),b=i.useId();let d=!0,p=i.useMemo(()=>(d=!1,{id:b,initial:a,isPresent:s,custom:l,onExitComplete:m=>{n.set(m,!0);for(const g of n.values())if(!g)return;r&&r()},register:m=>(n.set(m,!1),()=>n.delete(m))}),[s,n,r]);return o&&d&&(p={...p}),i.useMemo(()=>{n.forEach((m,g)=>n.set(g,!1))},[s]),i.useEffect(()=>{!s&&!n.size&&r&&r()},[s]),u==="popLayout"&&(e=t.jsx(se,{isPresent:s,anchorX:f,root:y,children:e})),t.jsx(_.Provider,{value:p,children:e})};function ie(){return new Map}const R=e=>e.key||"";function L(e){const a=[];return i.Children.forEach(e,s=>{i.isValidElement(s)&&a.push(s)}),a}const re=({children:e,custom:a,initial:s=!0,onExitComplete:r,presenceAffectsLayout:l=!0,mode:o="sync",propagate:u=!1,anchorX:f="left",root:y})=>{const[n,b]=J(u),d=i.useMemo(()=>L(e),[e]),p=u&&!n?[]:d.map(R),m=i.useRef(!0),g=i.useRef(d),h=K(()=>new Map),[v,A]=i.useState(d),[C,P]=i.useState(d);N(()=>{m.current=!1,g.current=d;for(let x=0;x<C.length;x++){const c=R(C[x]);p.includes(c)?h.delete(c):h.get(c)!==!0&&h.set(c,!1)}},[C,p.length,p.join("-")]);const I=[];if(d!==v){let x=[...d];for(let c=0;c<C.length;c++){const j=C[c],k=R(j);p.includes(k)||(x.splice(c,0,j),I.push(j))}return o==="wait"&&I.length&&(x=I),P(L(x)),A(d),null}const{forceRender:U}=i.useContext(O);return t.jsx(t.Fragment,{children:C.map(x=>{const c=R(x),j=u&&!n?!1:d===C||p.includes(c),k=()=>{if(h.has(c))h.set(c,!0);else return;let T=!0;h.forEach(V=>{V||(T=!1)}),T&&(U?.(),P(g.current),u&&b?.(),r&&r())};return t.jsx(oe,{isPresent:j,initial:!m.current||s?void 0:!1,custom:a,presenceAffectsLayout:l,mode:o,root:y,onExitComplete:j?void 0:k,anchorX:f,children:x},c)})})},W=["I hear you. Tell me more about that.","It sounds like you're going through a lot right now.","Have you tried taking a deep breath?","That makes sense. How does that make you feel?","I'm here for you.","What do you think would help you feel better in this moment?","It's okay to feel this way.","You are stronger than you think.","Would you like to try a quick meditation?","Sometimes writing it down helps. Have you tried journaling today?"],ae=()=>W[Math.floor(Math.random()*W.length)],le=()=>{const[e,a]=i.useState([{id:1,text:"Hello! I'm MindMate. How are you feeling today?",sender:"ai",timestamp:new Date}]),[s,r]=i.useState(!1),l=i.useCallback(o=>{if(!o.trim())return;const u={id:Date.now(),text:o,sender:"user",timestamp:new Date};a(f=>[...f,u]),r(!0),setTimeout(()=>{const f={id:Date.now()+1,text:ae(),sender:"ai",timestamp:new Date};a(y=>[...y,f]),r(!1)},1500+Math.random()*1e3)},[]);return{messages:e,sendMessage:l,isTyping:s}},de=()=>{const e=B();return t.jsxs(S,{sx:{display:"flex",alignItems:"center",p:1,bgcolor:"background.paper",borderRadius:2,width:"fit-content"},children:[t.jsx(w.div,{style:{width:6,height:6,margin:2,borderRadius:"50%",backgroundColor:e.palette.text.secondary},animate:{y:[0,-5,0]},transition:{duration:.6,repeat:1/0,delay:0}}),t.jsx(w.div,{style:{width:6,height:6,margin:2,borderRadius:"50%",backgroundColor:e.palette.text.secondary},animate:{y:[0,-5,0]},transition:{duration:.6,repeat:1/0,delay:.2}}),t.jsx(w.div,{style:{width:6,height:6,margin:2,borderRadius:"50%",backgroundColor:e.palette.text.secondary},animate:{y:[0,-5,0]},transition:{duration:.6,repeat:1/0,delay:.4}})]})},Ce=()=>{const{messages:e,sendMessage:a,isTyping:s}=le(),[r,l]=i.useState(""),o=i.useRef(null),u=B();i.useEffect(()=>{o.current?.scrollIntoView({behavior:"smooth"})},[e,s]);const f=()=>{r.trim()&&(a(r),l(""))},y=n=>{n.key==="Enter"&&!n.shiftKey&&(n.preventDefault(),f())};return t.jsxs(Y,{maxWidth:"md",sx:{height:"85vh",display:"flex",flexDirection:"column"},children:[t.jsxs(M,{elevation:3,sx:{flexGrow:1,mb:2,p:2,overflowY:"auto",display:"flex",flexDirection:"column",gap:2,backgroundImage:u.palette.mode==="light"?"linear-gradient(to bottom right, #fdfbfb, #ebedee)":"none"},children:[t.jsxs(re,{children:[e.map(n=>t.jsx(w.div,{initial:{opacity:0,scale:.8,y:10},animate:{opacity:1,scale:1,y:0},transition:{duration:.3},style:{alignSelf:n.sender==="user"?"flex-end":"flex-start",maxWidth:"70%"},children:t.jsxs(S,{sx:{display:"flex",flexDirection:n.sender==="user"?"row-reverse":"row",alignItems:"flex-end",gap:1},children:[t.jsx(D,{sx:{bgcolor:n.sender==="user"?"secondary.main":"primary.main",width:32,height:32},children:n.sender==="user"?t.jsx(G,{fontSize:"small"}):t.jsx(z,{fontSize:"small"})}),t.jsxs(M,{elevation:1,sx:{p:2,borderRadius:4,borderBottomRightRadius:n.sender==="user"?0:16,borderBottomLeftRadius:n.sender==="ai"?0:16,bgcolor:n.sender==="user"?"primary.main":"background.paper",color:n.sender==="user"?"white":"text.primary"},children:[t.jsx(E,{variant:"body1",children:n.text}),t.jsx(E,{variant:"caption",sx:{display:"block",textAlign:"right",mt:.5,opacity:.7},children:n.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})},n.id)),s&&t.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{alignSelf:"flex-start"},children:t.jsxs(S,{sx:{display:"flex",gap:1,alignItems:"center",ml:1},children:[t.jsx(D,{sx:{bgcolor:"primary.main",width:32,height:32},children:t.jsx(z,{fontSize:"small"})}),t.jsx(de,{})]})})]}),t.jsx("div",{ref:o})]}),t.jsxs(M,{elevation:3,component:"form",sx:{p:"2px 4px",display:"flex",alignItems:"center",borderRadius:5},children:[t.jsx(Q,{sx:{ml:1,flex:1},placeholder:"Type your message...",variant:"standard",InputProps:{disableUnderline:!0},value:r,onChange:n=>l(n.target.value),onKeyPress:y,multiline:!0,maxRows:3}),t.jsx(F,{type:"button",sx:{p:"10px",color:"primary.main"},"aria-label":"send",onClick:f,children:t.jsx(Z,{})})]})]})};export{Ce as default};
